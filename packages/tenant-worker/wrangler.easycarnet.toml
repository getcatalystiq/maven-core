name = "maven-tenant-easycarnet"
main = "src/index.ts"
compatibility_date = "2025-01-23"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true

# Durable Objects
[[durable_objects.bindings]]
name = "TENANT_AGENT"
class_name = "TenantAgent"

[[durable_objects.bindings]]
name = "Sandbox"
class_name = "Sandbox"

# Migrations
[[migrations]]
tag = "v1"
new_sqlite_classes = ["TenantAgent"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["Sandbox"]

# Container for this tenant - use pre-built image from Cloudflare registry
[[containers]]
class_name = "Sandbox"
image = "registry.cloudflare.com/7b7fb01e095cae40c829f948caa48f54/maven-agent:v1.5.0"
instance_type = "basic"

[vars]
JWT_ISSUER = "https://maven.example.com"
CONTROL_PLANE_URL = "https://maven-control-plane.tools-7b7.workers.dev"
TENANT_ID = "dd7e0321-d274-4a79-942a-bb190dd3720b"
TENANT_SLUG = "easycarnet"
AWS_REGION = "us-east-1"
