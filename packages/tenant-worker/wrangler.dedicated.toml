name = "maven-tenant-easycarnet"
main = "src/index.ts"
compatibility_date = "2025-01-23"
compatibility_flags = ["nodejs_compat"]

# Enable observability
[observability]
enabled = true

[[durable_objects.bindings]]
name = "TENANT_AGENT"
class_name = "TenantAgent"

[[durable_objects.bindings]]
name = "Sandbox"
class_name = "Sandbox"

# Migrations
[[migrations]]
tag = "v1"
new_sqlite_classes = ["TenantAgent"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["Sandbox"]

# Container for agent sandbox
[[containers]]
class_name = "Sandbox"
image = "registry.cloudflare.com/7b7fb01e095cae40c829f948caa48f54/maven-agent:v1.3.3"
instance_type = "basic"

[vars]
JWT_ISSUER = "https://maven.example.com"
CONTROL_PLANE_URL = "https://maven-control-plane.tools-7b7.workers.dev"
TENANT_ID = "481194f9-d89b-49ed-900e-9757d78ec437"
TENANT_SLUG = "easycarnet"
AWS_REGION = "us-east-1"

[[secrets_store_secrets]]
binding = "JWT_PUBLIC_KEY"
store_id = "4f06aa96622946a4b336737a727e9354"
secret_name = "maven-jwt-public-key"

[[secrets_store_secrets]]
binding = "INTERNAL_API_KEY"
store_id = "4f06aa96622946a4b336737a727e9354"
secret_name = "maven-internal-api-key"
